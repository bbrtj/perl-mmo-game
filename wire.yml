env:
    class: Component::Env

db:
    class: Component::DB
    args:
        env:
            $ref: env

redis:
    class: Component::Redis
    args:
        env:
            $ref: env

log:
    class: Component::Log
    args:
        env:
            $ref: env
        filename: 'logs/application.log'

encoder:
    class: Component::Encoder

# Repositories

models:
    class: Repository::Models
    args:
        db:
            $ref: db

cache:
    class: Repository::Cache
    args:
        redis:
            $ref: redis
        encoder:
            $ref: encoder

lore_data:
    class: Repository::LoreData

units:
    class: Repository::Units
    args:
        repo:
            $ref: models

# Services

user_service:
    class: Service::User
    args:
        repo:
            $ref: models

channel_service:
    class: Service::Channel
    args:
        store:
            $ref: redis
        encoder:
            $ref: encoder
        key: server_feedback

worker_channel_service:
    class: Service::Channel
    args:
        store:
            $ref: redis
        encoder:
            $ref: encoder
        key: server_jobs

faker_service:
    class: Service::Faker
    args:
        character_service:
            $ref: character_service

character_service:
    class: Service::Character
    args:
        repo:
            $ref: models

