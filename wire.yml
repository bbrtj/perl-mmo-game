env:
    class: Component::Env

db:
    class: Component::DB
    args:
        env:
            $ref: env

redis:
    class: Component::Redis
    args:
        env:
            $ref: env

log:
    class: Mojo::Log
    args:
        path: 'logs/application.log'
        level: 'debug'

# Repositories

schema_repo:
    class: Repository::Schema
    args:
        db:
            $ref: db

char_cache:
    class: Repository::CharCache
    args:
        redis:
            $ref: redis

lore_data:
    class: Repository::LoreData
    args:
        db:
            $ref: db

actor_unit:
    class: Repository::ActorUnit
    args:
        repo:
            $ref: schema_repo
        db:
            $ref: db

battle_unit:
    class: Repository::BattleUnit
    args:
        repo:
            $ref: schema_repo
        db:
            $ref: db
        actor_repo:
            $ref: actor_unit

# Services

user_service:
    class: Service::User
    args:
        repo:
            $ref: schema_repo
